<!DOCTYPE html>
<html lang="fr">
<script id="tinyhippos-injected">if (window.top.ripple) { window.top.ripple("bootstrap").inject(window, document); }</script>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">

    <title>Find text</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/starter-template.css" rel="stylesheet">
	<!--<link href="css/signin.css" rel="stylesheet">-->
    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>

    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Urban Explorer</a>
        </div>
        <div class="collapse navbar-collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="#">Home</a></li>
            <li><a href="#about">About</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container">
      
	<form name="findForm" id="findForm"  class="form-signin">
		<h2 class="form-signin-heading">Find entities with INSEE Data</h2>
		<input type="text" class="form-control" placeholder="Text to search" required="" autofocus="" id="testSearchValue">
 
		<button class="btn btn-lg btn-primary btn-block" type="submit" onclick="startTestSearch(); return false;">Search</button>
	</form>
	
	<div id="testSearchResult">
		<pre id="testSearchResultText">
		</pre>
	</div>

    </div><!-- /.container -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
   	<script>
	function startTestSearch() {
	var relpath = "/find";
	var 
		base = window.location.href.replace(/\/$/, "");
			if (base.lastIndexOf(relpath) != (base.length - relpath.length)) {
				base = base + relpath;
			}
			base = "http://localhost:8080/entityhub/site/insee/find";
			//alert ($("#testSearchValue").val());

			$("#testSearchResultText").text("... waiting for results ...");
			$("#testSearchResult").show();
			var data = "name=" + $("#testSearchValue").val() + "&limit=10&offset=0&field=http://rdf.insee.fr/def/geo#nom";
	$.ajax({
				type : "POST",
				beforeSend : function(req) {
					req.setRequestHeader("Accept", $("#findOutputFormat").val());
				},
				url : base,
				data : data, //$("#findForm").serialize(),
				dataType : "text",
				cache : false,
				success : function(result) {
					//alert (result);
					$("#testSearchResultText").text(result);
				},
				error : function(jqXHR, textStatus, errorThrown) {
					$("#testSearchResultText").text(
							jqXHR.statusText + " - " + jqXHR.responseText);
				}
			});
		}
	</script>
	<script src="js/jquery-1.11.0.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
  

<div id="cacaowebchromeextension"></div>
<script type="text/javascript">var Cacaoweb = { callbackIsRunning: function () { var cacaodiv = document.createElement("div"); cacaodiv.id = "cacaorunning"; document.body.appendChild(cacaodiv); } };</script><script id="isrunning" src="http://127.0.0.1:4001/isrunning" type="text/javascript"></script>
</body>
</html>